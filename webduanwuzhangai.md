## 一、web端无障碍问题
　　Web端无障碍问题3个无障碍问题，每个控件或功能的无障碍问题包含问题描述、可能原因、修改建议三部分，问题原因是对无障碍问题进行简单描述，方便开发者理解。可能原因是造成这种无障碍问题可能的原因。修改建议部分，是使用HTML、CSS、JS、JQUERY、WAI-ARIA等技术为无障碍问题提供的修改建议，参考自WCAG2.0的支持文档（How to meet WCAG2.0）。<br/>
　　其中，WAI-ARIA（the Accessible Rich Internet Applications Suite）是由W3C的 Protocols and Formats Working Group (PFWG)工作组开发的，是W3C网页无障碍倡议（WAI）的一部分。WAI-ARIA定义一种让残障群体更好无障碍访问web内容和应用的方法。WAI-ARIA定义的方法对web动态内容，和使用Ajax、HTML、JavaScript和其他相关技术开发的先进用户界面控件特别有帮助。当前，网站所提供的功能很多不能为残障用户使用，尤其是依靠屏幕阅读器和不能使用鼠标的用户。WAI-ARIA通过定义新的提交给辅助技术的方法来解决这些问题。使用WAI-ARIA可以使先进web应用对残障用户体验更加友好操作更便捷。<br/>
　　但是，由于国内屏幕阅读器发展较晚，对firefox、chrome等第三方浏览器支持不尽人意。目前大多数屏幕阅读器用户还是以使用InternetExplorer为主。由于IE对ARIA尚未全面支持，导致部分ARIA特性未能在IE中很好的实现，但考虑到最大化的向后兼容，建议仍使用这些ARIA技术，并在此基础上使用一些目前国内读屏所能支持的方式来实现所需的特性，以满足对当前国内读屏软件的兼容。<br/>
### 1.1图片```<img>```

背景描述：<br/>
　　*小朱同学是位视障工程师，主要从事互联网产品的无障碍测试。最近，小朱同学找了位女朋友，但自从有了女朋友，小朱同学是犯了愁。小朱同学的女朋友总是要各种各样的礼物，不是化妆品，就是护肤品，不是衣服，就是鞋子。小朱同学不方便出行，只能求助于网购。但当小朱同学打开购物网站，在屏幕阅读器的支持下，使用键盘tab键浏览网页，在网页各个元素内切换浏览，结果却让小朱同学想哭，网页中的提示都是什么“图片1”、“图片链接已遍历”，有的没有目的提示，有的没有提示文本，甚至有的控件类型都不正确。小朱同学面对满网页的图片，在心里默默给该购物网站划了个叉。*<br/>
#### 1.1.1非装饰性图片无替代文本

![](/1.png)<br/>
图1 非装饰性图片无替代文本【示例】<br/>
【问题描述】<br/>
对于非装饰性图片，应该添加正确的替代文本，用以说明图片所展示的内容，否则用户将无法了解到图片所要传递的信息。<br/>
使用 alt 属性为图片添加替代文本。如果图片展示包含理解网页重要信息的文字，alt属性应该添加这些字。alt不一定要描述图片的视觉特性，但是必须与图片传达的含义相同。<br/>
【可能原因】<br/>
【修改建议】<br/>
样例1：<br/>
为图片链接添加 ALT 属性：<br/>
```
<a href="home.html"><br/>
<img src="house.gif" alt="无障碍主页">去到无障碍主页</a>```

样例2：<br/>
为网页中的照片，添加详尽的描述文本；<br/>
```
<img alt="信息无障碍联盟LOGO" src="img001.gif" />```

#### 1.1.2图片链接无目的文本
![](/2.png)<br/>
图2 图片链接无目的文本【示例】<br/>
【问题描述】<br/>
链接的目的文本用以说明链接的目的导向。用户通过屏幕阅读器获取链接的目的文本，从而了解链接作用。<br/>
【可能原因】<br/>
【修改建议】<br/>
样例1：<br/>
图片链接，图片无意义，可为img元素添加alt属性来描述链接目的：<br/>
```
<a href="routes.html"> <img src="topo.gif" alt="去到无障碍论坛的路线" /></a>```

样例2：<br/>
图片和文字链接，图片无意义：<br/>
```
<a href="routes.html">
<img src="topo.gif" alt="" />去到无障碍论坛的路线
</a>```

样例3：<br/>
图片和文字链接，图片有意义：<br/>
```
<a href="prod_123_feedback.htm">反馈
<img src="response.gif" width="15" height="15" alt="收到响应图标" />
</a>```

#### 1.1.3图片链接不能响应回车键
![](/3.png)<br/>
图3 图片链接不能响应回车键【示例】<br/>
【问题描述】<br/>
使用键盘对图片链接进行点击操作，是使用按下回车键（enter）来完成的。如果链接不能响应回车键的点击操作，用户将无法使用键盘来激活这个链接。<br/>
onclick 属性由元素上的鼠标点击触发。onclick 事件会在对象被点击（click事件完成）时发生，是一个click事件的监听器，监听到点击后，执行对应Js代码。<br/>
请注意， onclick 与 onmousedown 不同。单击事件是在同一元素上发生了鼠标按下事件之后又发生了鼠标放开事件时才发生的。通过使用anchors（锚点）和buttons的onclcik事件使键盘可用对于HTML标准控件links和buttons来说，默认可以通过鼠标点击，和按enter键来实现。<br/>
【可能原因】<br/>
【修改建议】<br/>

#### 1.1.4图片按钮缺少目的文本
![](/4.png)<br/>
图4 图片链接不能响应回车键【示例】<br/>

【问题描述】<br/>
由于按钮使用图片或某些特殊性标识符展现，屏幕阅读器无法读出按钮所展现内容，用户难以理解按钮本身所表达的意思，从而无法做出正确的操作；<br/>
【可能原因】<br/>
开发者使用一张图片或一个标识符来展现按钮的用途，屏幕阅读器无法读出图片中内容；<br/>
【修改建议】<br/>
给图片按钮添加易于理解的提示文本。<br/>
样例1：<br/>
使用title属性，给按钮添加目的文本；<br/>
```
<button type="button" title="信息无障碍产品联盟"><img src="logo.jpg" alt=""></button>```

样例2：<br/>
使用 alt 属性为图片按钮添加替代文本；<br/>
```
<button type="button" ><img src="1.jpg" alt="信息无障碍研究会"></button>```

#### 1.1.5图片按钮无法获得键盘焦点
![](/5.png)<br/>
图5 图片按钮无法获得键盘焦点【示例】<br/>
【问题描述】<br/>
使用屏幕阅读器浏览网页，无法聚焦到按钮上，导致无法操作；<br/>
【可能原因】<br/>
开发者为了让按钮更加美观，故意使用各类方式让按钮无法聚焦；<br/>
【修改建议】<br/>
#### 1.1.6图片按钮控件类型朗读不正确
![](/6.png)<br/>
图6 图片按钮控件类型朗读不正确【示例】<br/>
【问题描述】<br/>
自定义图片按钮，屏幕阅读器无法提示为“按钮”控件，使用屏幕阅读器用户无法对按钮做出正确的操作。<br/>
【可能原因】<br/>
自定义“按钮”缺少 role、tabindex<br/> 属性，导致屏幕阅读器无法聚焦到此元素且无法读出正确的控件类型。<br/>
【修改建议】<br/>
### 1.2验证码
背景描述：<br/>
　　*为了保证网站的安全，开发者设计了各种各样的验证码，比如最传统的输入字母和数字的验证码、输入汉字验证码、短信验证码、语音验证码、有图形选择验证码（如图8）、有图形组合验证码（如京东app京豆领取）、滑动验证码（如YY注册）、九宫格验证码（如百度贴吧发帖验证码）等。这些验证码给网站安全带来了保障，却也大大妨碍了小朱同学的幸福生活。虽然有多种验证码，但一个网站往往采用单一感知的验证码，这让视觉受限的小朱同学很是苦恼。尤其是在出远门时候买火车票，小朱同学对这种清晰度不够、辨识度较低，且只有视觉这一种反馈的验证码，很是反感啊。*<br/>
#### 1.2.1感知方式只有一种，未提供多种反馈
![](/7.png)<br/>
图7 感知方式只有一种，未提供多种反馈【示例】<br/>
【问题描述】<br/>
网站设计者只提供一种验证码方式。例如只有图形验证码，没有语音、短信等多种反馈；<br/>
【可能原因】<br/>
开发者不具备提供多种验证码的能力，或成本过高开发者放弃提供多种验证码校验方式；<br/>
【修改建议】<br/>
提供一种任何人群都可以使用的验证码类型， 或者使用多种验证码类型让任何人群都可以使用。<br/>
#### 1.2.2无法用键盘输入验证码
![](/8.png)<br/>
图8 无法用键盘输入验证码【示例】<br/>
【问题描述】<br/>
某些验证码为FLASH内容，无法用键盘输入，屏幕阅读器用户无法使用，例如：12306的登录验证码。<br/>
【可能原因】<br/>
【修改建议】<br/>
### 1.3浮层
背景描述：<br/>
　　*浮层通常是通过frame、div等实现提供提示、通告等功能的弹出的可移动的独立窗口。网站多使用浮窗来实现登陆、警告等功能。但是，用户多是只能通过视觉来感知弹层的存在，对视觉受限的屏幕阅读器用户来说，没有其他感知的提示有浮窗的存在。这些用户在点击按钮或链接以后，键盘焦点仍停留在原来的焦点位置，不会自己聚焦到浮窗上，只有使用tab键便利在网页最后，才会进入浮窗，这给屏幕阅读器用户带来很大的不便。小朱同学要使用某宝付款，上某度下载东西的时候就遇上了类似的问题。*<br/>
#### 1.3.1不知道有浮层弹出
![](/9.png)<br/>
图9 不知道有浮层弹出【示例】<br/>
【问题描述】<br/>
由于网页浮层弹出时，焦点没有及时聚焦到浮层元素内，键盘使用者无法获知有浮层的存在；<br/>
【可能原因】<br/>
1、弹出的浮层没有table index属性，焦点无法跟在触发控件后面；<br/>
2、浮层内容缺少文本描述，例如登录对话框，建议添加title属性来描述。<br/>
【修改建议】<br/>
#### 1.3.2焦点不在触发控件之后
![](/10.png)<br/>
图10 焦点不在触发空间之后【示例】<br/>
【问题描述】<br/>
按tab移动网页焦点到触发浮层控件，激活后，焦点没有及时进入浮层内容，下一个焦点不在浮层内；<br/>
【可能原因】<br/>
可能是弹出的浮层子元素没有添加tabindex，或是javascript直接追加元素非紧跟当前焦点插入元素。<br/>
【修改建议】<br/>
样例1：<br/>
给浮层内的子元素增加tabindex属性。<br/>
样例2：<br/>
获取当前焦点并紧跟其后插入控件元素：
```
<script type="text/javascript">
function createInput(divid){
	var btn = document.activeElement;
	var did = document.getElementById(divid);
	var inp = document.createElement("input");
	inp.type="text";
	inp.name="username";
	inp.value="我跟着"+btn.id;
//	divid.appendChild(inp);
	did.insertBefore(inp,btn.nextSibling);
}
</script>
<div id="divid">
<input name="but1" id="but1" type="button" onclick="createInput('divid');" value="新增输入框1" /><br />
<input name="but2" id="but2" type="button" onclick="createInput('divid');" value="新增输入框2" /><br />
<input name="but3" id="but3" type="button" onclick="createInput('divid');" value="新增输入框3" /><br />
</div>```
#### 1.3.3不能使用键盘关闭浮层
![](/11.png)<br/>
图11 不能使用键盘关闭浮窗【示例】<br/>
【问题描述】<br/>
浮层中的关闭按钮为图片，或自定义控件，导致焦点无法聚焦到关闭控件。<br/>
【可能原因】<br/>
自定义控件为图片链接，没有给图片链接添加alt或title属性，或自定义控件导致的没有焦点。<br/>
【修改建议】<br/>
样例1：
<img src="img0.jpg" alt="关闭" tabindex="0" role="button" />
#### 1.3.4用键盘操作，焦点无法进入浮层
![](/12.png)<br/>
图12 用键盘操作，焦点无法进入浮层【示例】<br/>
【问题描述】<br/>
使用键盘，无法遍历到浮层内元素；<br/>
【可能原因】<br/>
可能浮层内有阻止焦点进入的代码，或者自定义控件没考虑键盘操作；<br/>
【修改建议】<br/>















